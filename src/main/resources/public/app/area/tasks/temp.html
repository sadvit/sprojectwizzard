<DIV ng-controller="TasksController as controller" id="content">
    <slinks></slinks>

    <DIV id="page">
        <DIV class="main-column">
            <H3>Задачи:</H3>
            <table>
                <thead>
                    <tr>
                        <th class="insignificant">№</th>
                        <th>Название</th>
                        <TH>Описание</TH>
                        <TH>Требование</TH>
                        <TH>Срок</TH>
                    </tr>
                </thead>
                <tbody ng-repeat="task in controller.tasksForProject">
                    <tr ng-click="controller.editTask(task.id)">
                        <td class="insignificant">{{$index}}</td>
                        <td>{{task.name}}</td>
                        <td>{{task.description}}</td>
                        <td>{{task.requirement.name}}</td>
                        <td>до {{task.closeDate | date:'yyyy-MM-dd'}}</td>
                    </tr>
                </tbody>
            </table>
        </DIV>
        <div class="side-column">
            <h3>Проекты:</h3>
            <UL class="projects-block">
                <li ng-repeat="project in controller.projects">
                    <a ng-click="controller.updateTasks(project.id)">{{project.name}}</a>
                </li>
            </UL>
            <br/>
            <h3>Действия:</h3>
            <br/>
            <div class="main-column-buttons">
                <button ng-click="controller.createTask()" ng-if="controller.projects[0] !== undefined">Создать задачу</button>
                <label ng-if="controller.projects[0] === undefined" >У вас пока что нет проектов
                    <a href="#projects/project_edit">Перейти к созданию</a>
                </label>
            </div>
        </div>
    </DIV>
    <sfooter></sfooter>
</DIV>